<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iCarros - Vendas</title>
    <!-- Bootstrap css-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- css-->
    <link href="assets/css/styles.css" rel="stylesheet">
    <!-- Bootstrap css Icons-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css" rel="stylesheet">
    <style>
        #hero{
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url("assets/img/vendas/bannervendas.png") no-repeat center !important;
            color: aliceblue;
            width: 100%;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <div id="menu-container"></div>
        <!-- Modal for login -->
        <div class="modal fade" id="agendamentoModal" tabindex="-1" aria-labelledby="agendamentoModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header text-center">
                        <h5 class="modal-title w-100" id="agendamentoModalLabel">Login</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="loginForm" action="userArea.html" method="POST" novalidate>                  
                                <div class="mb-3">
                                    <input type="text" name="username" class="form-control" id="username" placeholder="Email" required>
                                </div>
                            <div class="mb-3">
                                <div class="input-group">
                                    <input type="password" name="password" class="form-control" id="password" placeholder="Senha" required>
                                    <button type="button" class="btn  border border-secondary-subtle rounded-end" onclick="togglePassword('password')">
                                        <i class="bi bi-eye" id="password-icon"></i>
                                    </button>
                                </div>
                            </div>
                            <!-- Alert de erro (invisível por padrão) -->
                            <div id="alertContainer" class="alert alert-danger d-none" role="alert">
                                <ul id="errorList" class="mb-0"></ul>
                            </div>
                            <div class="mb-3 d-flex justify-content-center">
                                <button type="reset" class="btn btn-danger me-4">Limpar</button>
                                <button type="submit" class="btn btn-success">Entrar</button>  
                            </div>
                        </form>
                        <div class="text-center"><span>OU</span></div>
                        
                        <div class="mt-1 mb-4 text-center">
                            Não tem uma conta?
                            <a href="#" class="text-primary text-decoration-none" data-bs-toggle="modal" data-bs-target="#cadastroModal" data-bs-dismiss="modal">Cadastre-se</a>
                        </div>
                        <div class="d-flex align-items-center mt-3">
                            <hr class="flex-grow-1" />
                            <button type="button"
                            class="btn btn-light px-3 mx-2 d-flex align-items-center justify-content-center">
                            <img class="border-opacity-10" src="https://developers.google.com/identity/images/g-logo.png"
                                alt="Google" width="30px">
                            </button>
                            <hr class="flex-grow-1" />
                        </div>
                    </div>   
                </div>
            </div>
        </div>
       <!-- Modal for Cadastro -->
       <div class="modal fade" id="cadastroModal" tabindex="-1" aria-labelledby="cadastroModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header text-center">
                    <h5 class="modal-title w-100" id="cadastroModalLabel">Cadastre-se</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="cadastroForm" action="sign_in.html" method="POST" class="needs-validation" novalidate>
                        <!-- Nome -->
                        <div class="mb-3">
                            <input type="text" name="nome" class="form-control" id="nome" placeholder="Nome" required>
                            <!-- Aqui será inserido dinamicamente o alerta -->
                        </div>
                        <!-- Sobrenome -->
                        <div class="mb-3">
                            <input type="text" name="sobrenome" class="form-control" id="sobrenome" placeholder="Sobrenome" required>
                        </div>
                        <!-- Celular e WhatsApp -->
                        <div class="mb-3 d-flex justify-content-between">
                            <input type="text" name="celular" class="form-control me-2" id="celular" placeholder="Celular" pattern="\\d{11}" required>
                            <input type="text" name="whatsapp" class="form-control" id="whatsapp" placeholder="WhatsApp" pattern="\\d{11}">
                        </div>
                        <!-- Endereço -->
                        <div class="mb-3">
                            <input type="text" name="endereco" class="form-control" id="endereco" placeholder="Endereço" required>
                        </div>
                        <!-- Estado e Cidade -->
                        <div class="mb-3 d-flex justify-content-between">
                            <select name="estado" class="form-select me-2" required>
                                <option value="" selected>Estado</option>
                                    <option value="Acre">Acre</option>
                                    <option value="Alagoas">Alagoas</option>
                                    <option value="Amapá">Amapá</option>
                                    <option value="Amazonas">Amazonas</option>
                                    <option value="Bahia">Bahia</option>
                                    <option value="Ceará">Ceará</option>
                                    <option value="Distrito Federal">Distrito Federal</option>
                                    <option value="Espírito Santo">Espírito Santo</option>
                                    <option value="Goiás">Goiás</option>
                                    <option value="Maranhão">Maranhão</option>
                                    <option value="Mato Grosso">Mato Grosso</option>
                                    <option value="Mato Grosso do Sul">Mato Grosso do Sul</option>
                                    <option value="Minas Gerais">Minas Gerais</option>
                                    <option value="Pará">Pará</option>
                                    <option value="Paraíba">Paraíba</option>
                                    <option value="Paraná">Paraná</option>
                                    <option value="Pernambuco">Pernambuco</option>
                                    <option value="Piauí">Piauí</option>
                                    <option value="Rio de Janeiro">Rio de Janeiro</option>
                                    <option value="Rio Grande do Norte">Rio Grande do Norte</option>
                                    <option value="Rio Grande do Sul">Rio Grande do Sul</option>
                                    <option value="Rondônia">Rondônia</option>
                                    <option value="Roraima">Roraima</option>
                                    <option value="Santa Catarina">Santa Catarina</option>
                                    <option value="São Paulo">São Paulo</option>
                                    <option value="Sergipe">Sergipe</option>
                                    <option value="Tocantins">Tocantins</option>
                                    <option value="Estrangeiro">Estrangeiro</option>
                            </select>
                            <input type="text" name="cidade" class="form-control" id="cidade" placeholder="Cidade" required>
                        </div>
                        <!-- CPF e Data de Nascimento -->
                        <div class="mb-3 d-flex justify-content-between">
                            <input type="text" name="cpf" class="form-control me-2" id="cpf" placeholder="CPF" pattern="\\d{11}" required>
                            <input type="date" name="data_nascimento" class="form-control" id="dataNascimento" placeholder="Data de Nascimento" required>
                        </div>
                        <!-- Email -->
                        <div class="mb-3">
                            <input type="email" name="username" class="form-control" id="email" placeholder="Email" required>
                        </div>
                        <!-- Senha -->
                        <div class="mb-3">
                            <div class="input-group">
                                <input type="password" name="senha" class="form-control" id="senha" placeholder="Senha" required>
                                <button type="button" class="btn border border-secondary-subtle rounded-end" onclick="togglePassword('senha')">
                                    <i class="bi bi-eye" id="senha-icon"></i>
                                </button>
                            </div>
                        </div>
                        <!-- Confirmar Senha -->
                        <div class="mb-3">
                            <div class="input-group">
                                <input type="password" name="confirmar_senha" class="form-control" id="confirmarSenha" placeholder="Confirme sua senha" required>
                                <button type="button" class="btn border border-secondary-subtle rounded-end" onclick="togglePassword('confirmarSenha')">
                                    <i class="bi bi-eye" id="confirmarSenha-icon"></i>
                                </button>
                            </div>
                        </div>
                        <!-- Botões -->
                        <div class="mb-3 d-flex justify-content-center">
                            <button type="reset" class="btn btn-danger me-4">Limpar</button>
                            <button type="submit" class="btn btn-success">Cadastrar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="py-5 bg-light mt-5" id="hero">
        <div class="container text-center">
            <h1>Venda de Carros Antigos</h1>
            <p class="lead">Descubra a história e a paixão por trás dos Classicos.</p>
        </div>
    </section>

    <div class="container mt-5">
        <div class="d-flex justify-content-between mb-3">
            <h2>Veículos à Venda</h2>

        </div>
        <div id="carros-vendas-container" class="row"></div>
    </div>

    <script>

    async function carregarCarros() {
    try {
        const response = await fetch('conexao/vendas.json');
        const carroVendas = await response.json();

        const container = document.getElementById('carros-vendas-container');
        container.innerHTML = ''; // Limpa o conteúdo antes de carregar

        carroVendas.slice(0, 6).forEach(carroVendas => {
            const card = document.createElement('div');
            card.classList.add('col-md-4', 'mb-4', 'col-12');

            const imagensAdicionais = carroVendas.imagensAdicionais || []; // Garante que seja um array

            card.innerHTML = `
            <div class="card">
                <div id="carouselVendas${carroVendas.id}" class="carousel slide">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="${carroVendas.imagem}" class="d-block w-100" alt="Imagem de ${carroVendas.modelo}">
                        </div>
                        ${imagensAdicionais.map((imagem, index) => `
                            <div class="carousel-item">
                                <img src="${imagem}" class="d-block w-100" alt="Imagem adicional ${index + 1} de ${carroVendas.modelo}">
                            </div>
                        `).join('')}
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselVendas${carroVendas.id}" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Anterior</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselVendas${carroVendas.id}" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Próximo</span>
                    </button>
                </div>
                <div class="card-body">
                    <h4 class="text-center">${carroVendas.modelo} - ${carroVendas.ano}</h4>
                    <div class="text-center">
                        <button type="button" class="btn btn-lg mt-2 btn-outline-info" data-bs-toggle="modal" data-bs-target="#modalcarouselVendas${carroVendas.id}">
                        <i class="bi bi-eye"></i>
                        </button>
                        <button type="button" class="btn btn-lg mt-2 btn-outline-success" onclick="venderCarro(${carroVendas.id})">
                            <i class="bi bi-cart-plus"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modal Bootstrap -->
            <div class="modal fade" id="modalcarouselVendas${carroVendas.id}" tabindex="-1" aria-labelledby="modalcarouselVendasLabel${carroVendas.id}" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header bg-blue">
                            <h5 class="modal-title" id="modalcarouselVendasLabel${carroVendas.id}">Detalhes do Carro</h5>
                            <button type="button" class="btn text-white" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x-lg fs-5"></i></button>
                        </div>
                        <div class="modal-body">
                            <div id="modalcarouselVendas${carroVendas.id}" class="carousel slide">
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img src="${carroVendas.imagem}" class="d-block w-100" alt="Imagem de ${carroVendas.modelo}">
                                    </div>
                                    ${imagensAdicionais.map((imagem, index) => `
                                        <div class="carousel-item">
                                            <img src="${imagem}" class="d-block w-100" alt="Imagem adicional ${index + 1} de ${carroVendas.modelo}">
                                        </div>
                                    `).join('')}
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#modalcarouselVendas${carroVendas.id}" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Anterior</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#modalcarouselVendas${carroVendas.id}" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Próximo</span>
                                </button>
                            </div>
                            <h4>${carroVendas.modelo} - ${carroVendas.ano}</h4>
                            <h3>R$ ${carroVendas.preco.toFixed(2)}</h3>
                            <p>${carroVendas.descricao}</p>
                        </div>
                        <div class="modal-footer text-center d-flex justify-content-center">
                            <button type="button" class="btn btn-outline-danger me-2" data-bs-dismiss="modal"> 
                                <i class="bi bi-box-arrow-in-left"></i> Voltar
                            </button>
                            <button type="button" class="btn btn-outline-success" onclick="venderCarro(${carroVendas.id})">
                                <i class="bi bi-cart-plus"></i> Comprar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;

            container.appendChild(card);
        });
    } catch (error) {
        console.error("Erro ao carregar os carros:", error);
        document.getElementById('carros-vendas-container').innerHTML = `<p class="text-danger text-center">Erro ao carregar os dados.</p>`;
    }
    }

    function venderCarro(id) {
    alert(`Você escolheu comprar o carro ID: ${id}`);
    }

    // Carrega os carros ao carregar a página
    carregarCarros();

    </script>


       <!-- Footer -->
       <div id="footer-container"></div>
       <!-- incluir login-->
       <script src="assets/js/login.js"></script>
       <!-- incluir footer e rodapé-->
       <script src="assets/js/includes.js"></script>
       <!-- incluir script de validação login-->
       <script src="assets/js/script.js"></script>
       <!-- Bootstrap js -->
       <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>